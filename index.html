<!DOCTYPE html>
<html>
<head>
  <title>ตรวจสอบเลขบัตรประชาชน 13 หลัก (วิธีที่ 3)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    input { padding: 8px; font-size: 16px; width: 250px; }
    button { padding: 8px 16px; font-size: 16px; margin-left: 10px; }
    #result { margin-top: 20px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>ตรวจสอบเลขบัตรประชาชน 13 หลัก</h1>
  <input type="text" id="idcard" maxlength="13" placeholder="กรอกเลขบัตรประชาชน 13 หลัก">
  <button onclick="checkID()">ตรวจสอบ</button>
  <div id="result"></div>

  <script>
    // ดัก keypress ให้กรอกได้เฉพาะเลข 0-9 เท่านั้น (วิธีที่ 3)
    document.getElementById('idcard').addEventListener('keypress', function(e) {
      if (!/[0-9]/.test(e.key)) {
        e.preventDefault();
      }
    });

    // ฟังก์ชันตรวจสอบเลขบัตรประชาชน 13 หลัก
    function checkID() {
      const id = document.getElementById('idcard').value.trim();
      const resultDiv = document.getElementById('result');

      if (id.length !== 13) {
        resultDiv.textContent = "กรุณากรอกเลขบัตรประชาชนให้ครบ 13 หลัก";
        resultDiv.style.color = "red";
        return;
      }

      let sum = 0;
      for (let i = 0; i < 12; i++) {
        sum += parseInt(id.charAt(i)) * (13 - i);
      }
      const correctCheckDigit = (11 - (sum % 11)) % 10;
      const inputCheckDigit = parseInt(id.charAt(12));

      if (correctCheckDigit === inputCheckDigit) {
        resultDiv.innerHTML = `เลขบัตรประชาชน <strong>${id}</strong> ถูกต้อง ✔️`;
        resultDiv.style.color = "green";
      } else {
        const correctedID = id.substring(0, 12) + correctCheckDigit;
        resultDiv.innerHTML = `เลขบัตรประชาชนไม่ถูกต้อง ❌<br>เลขบัตรที่ถูกต้องคือ: <strong>${correctedID}</strong>`;
        resultDiv.style.color = "red";
      }
    }
  </script>
</body>
</html>
